(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fc7524a"],{"13d5":function(t,e,a){"use strict";var n=a("23e7"),o=a("d58f").left,r=a("a640"),s=a("ae40"),l=a("2d00"),i=a("605d"),c=r("reduce"),d=s("reduce",{1:0}),p=!i&&l>79&&l<83;n({target:"Array",proto:!0,forced:!c||!d||p},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"9d6b":function(t,e,a){},"9eb7":function(t,e,a){"use strict";a("9d6b")},a10a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search"},[a("el-row",{staticStyle:{"margin-top":"10px","margin-left":"5px"}},[a("el-col",{attrs:{span:24,offset:0}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"相关领域"}},[a("el-select",{attrs:{placeholder:"请选择相关领域",multiple:""},model:{value:t.searchPars.teamGrade,callback:function(e){t.$set(t.searchPars,"teamGrade",e)},expression:"searchPars.teamGrade"}},t._l(t.kinds,(function(t){return a("el-option",{key:t.codeID,attrs:{label:t.codeName,value:t.codeID}})})),1)],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"救援类型"}},[a("el-select",{attrs:{placeholder:"请选择救援类型",multiple:""},model:{value:t.searchPars.teamType,callback:function(e){t.$set(t.searchPars,"teamType",e)},expression:"searchPars.teamType"}},t._l(t.types,(function(t){return a("el-option",{key:t.codeID,attrs:{label:t.codeName,value:t.codeID}})})),1)],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"60px"}},[a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:t.searchPars.contactName,callback:function(e){t.$set(t.searchPars,"contactName",e)},expression:"searchPars.contactName"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handSearch}},[t._v("搜索")])],1)],1)],1)],1)],1),a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{background:"#66b1ff",color:"#fff",border:"1px solid #fff"},border:!0}},[a("el-table-column",{attrs:{prop:"teamGradeName",label:"相关领域",width:"140",fixed:""}}),a("el-table-column",{attrs:{prop:"teamName",label:"队伍名称",width:"160",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top",effect:"dark"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v(t._s(t.handAllContent(e.row,2)))])]),a("span",[t._v(t._s(t.handSubConent(e.row,2)))])])]}}])}),a("el-table-column",{attrs:{prop:"officeTel",label:"值班电话",width:"120",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.handOfficeContacts(e.row)}},[a("el-table-column",{attrs:{prop:"mobile",label:"联系电话",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-tooltip",{attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("向"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(e.row.mobile))]),t._v("打电话")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-phone-outline",size:"mini",round:""},on:{click:function(a){return t.Dail(e.row.mobile)}}})],1),a("el-tooltip",{attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("向"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(e.row.mobile))]),t._v("发短信")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-message",size:"mini",round:""}})],1),a("el-tooltip",{attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("向"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(e.row.mobile))]),t._v("发TTS通知")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-bell",size:"mini",round:""}})],1),a("el-tooltip",{attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("将"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(e.row.mobile))]),t._v("加入临时群组")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-user",size:"mini",round:""}})],1)],1),a("span",[t._v(t._s(e.row.mobile))])])]}}],null,!0)})],1)],1),a("span",[t._v(t._s(t.handSubConent(e.row,5)))])])]}}])}),a("el-table-column",{attrs:{prop:"contacts",label:"联系方式",width:"150",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.handContacts(e.row)}},[a("el-table-column",{attrs:{prop:"name",label:"联系人",width:"120"}}),a("el-table-column",{attrs:{prop:"mobile",label:"联系电话",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("my-telephone",{attrs:{book:t.handLeaderTel(e.row)}})]}}],null,!0)})],1)],1),a("span",[t._v(t._s(t.handSubConent(e.row,4)))])])]}}])}),a("el-table-column",{attrs:{prop:"teamType",label:"救援类型",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top",effect:"dark"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v(t._s(t.handAllContent(e.row,1)))])]),a("span",[t._v(t._s(t.handSubConent(e.row,1)))])])]}}])}),a("el-table-column",{attrs:{prop:"persons",label:"队伍人数",width:"70"}}),a("el-table-column",{attrs:{prop:"equipments",label:"主要装备",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top",effect:"dark"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v(t._s(t.handAllContent(e.row,3)))])]),a("span",[t._v(t._s(t.handSubConent(e.row,3)))])])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"5px"},attrs:{background:"",layout:"total,prev, pager, next",total:t.total,"current-page":t.searchPars.pageIndex,"page-size":t.searchPars.pageSize},on:{"current-change":t.handPageIndexChanged}})],1)])},o=[],r=(a("4de4"),a("d81d"),a("13d5"),a("b0c0"),a("d80d")),s=a("7c15"),l={watch:{filterText:function(t){this.$refs.tree.filter(t)}},data:function(){return{kinds:[],data:[],types:[],kindProps:{multiple:!0},treePars:{codeID:82,groupName:void 0,parentID:void 0,groupID:void 0,pageIndex:void 0,pageSize:1e3},searchPars:{teamType:[],teamGrade:[],contactName:void 0,pageIndex:void 0,pageSize:10},total:0,saveForm:{personID:void 0,groupID:void 0,types:[],groupName:void 0,name:void 0,nameJP:void 0,duty:0,post:void 0,mobile:void 0,tel:void 0,email:void 0,fax:void 0,index:0,comment:void 0},dialogFormVisible:!1,formLabelWidth:"80px",leaders:[],form:{layerID:"5",teamID:void 0,groupID:void 0,index:0,equipments:void 0,persons:0,teamType:[],teamGrade:void 0},tableData:[],treeData:[]}},components:{"my-telephone":r["a"]},methods:{handLeaderTel:function(t){return{display:!1,name:t.name,tel:t.mobile,ts:new Date}},handLeaderTel1:function(t){return{display:!1,name:t.contact,tel:t.tel,ts:new Date}},loadKinds:function(){var t=this,e={codeType:50};Object(s["c"])(e).then((function(e){t.kinds=e.data}))},loadTypes:function(){var t=this,e={codeType:1};Object(s["c"])(e).then((function(e){var a=e.data,n=a.reduce((function(t,e){return t[e.codeID]=e,e.children=[],t}),{}),o=a.filter((function(t){return n[t.parentID]&&n[t.parentID].children.push(t),"-1"==t.parentID}));t.types=o}))},handContacts:function(t){return t.contacts},handOfficeContacts:function(t){var e=[];return t.officeTel.map((function(t,a){e.push({mobile:t})})),e},handAllContent:function(t,e){var a="";switch(e){case 1:a=t.teamType;var n="";return a.map((function(t,e){n+=t.codeName+","})),n;case 2:return a=t.teamName,a;case 3:return a=t.equipments,a}},handSubConent:function(t,e){var a="";switch(e){case 1:a=t.teamType;var n="";return a.map((function(t,e){n+=t.codeName+","})),n.length>10&&(n=n.substring(0,10)+"..."),n;case 2:return a=t.teamName,a.length>10&&(a=a.substring(0,10)+"..."),a;case 3:return a=t.equipments,null==a?"":(a.length>10&&(a=a.substring(0,10)+"..."),a);case 4:var o=t.contacts;return 0==o.length?"":o.length>1?o[0].name+"("+o[0].mobile+")...":o[0].name+"("+o[0].mobile+")";case 5:var r="";return t.officeTel.map((function(t,e){r+=t+","})),r}},handChange:function(t){var e=this,a=[];a.push(t);var n={groupID:a};Object(s["hb"])(n).then((function(t){e.leaders=[],t.data.data.map((function(t,a){return 0==t.duty&&e.leaders.push(t),void 0===t}))}))},handSearch:function(){var t=this;console.log(this.searchPars),Object(s["Cb"])(this.searchPars).then((function(e){console.log(e),t.tableData=e.data,t.total=e.total}))},handPageIndexChanged:function(t){this.searchPars.pageIndex=t,this.handSearch()},handLeaderChanged:function(t){var e=this;this.leaders.map((function(a,n){if(a.personID==t)return e.form.personID=t,e.form.mobile=a.mobile,void(e.form.post=a.post)}))},handSave:function(){this.handSaveTeam()},handNew:function(){this.form.teamID=void 0,this.form.groupID=void 0,this.form.index=0,this.form.equipments=void 0,this.form.persons=void 0,this.form.teamType=[],this.form.teamGrade=void 0},handEdit:function(t){var e=this;this.handNew(),this.form.teamID=t.teamID,this.form.groupID=t.groupID,this.form.index=t.index,this.form.equipments=t.equipments,this.form.persons=t.persons,this.form.teamGrade=t.teamGrade,t.teamType.map((function(t,a){e.form.teamType.push(t.codeID)})),console.log("handEdit"),console.log(t),console.log(this.form),this.dialogFormVisible=!0},handDel:function(t){var e=this;this.$confirm("删除后将不能恢复,是否继续?","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[t.teamID],n={ids:a};Object(s["Ab"])(n).then((function(t){1==t.status?(e.$message({message:"应急队伍删除成功!",type:"success"}),e.handSearch()):e.$message({message:"应急队伍删除失败!",type:"error"})}))}))},handSaveTeam:function(){var t=this;console.log(this.form),this.form.persons=parseInt(this.form.persons),Object(s["zb"])(this.form).then((function(e){1==e.status?(t.form.teamID=e.data,t.$message({message:"保存应急队伍成功!",type:"success"}),t.handSearch(),t.dialogFormVisible=!1):t.$message({message:"保存应急队伍失败!",type:"error"})}))},getGroups:function(){var t=this;Object(s["Wb"])(this.treePars).then((function(e){var a=e.data,n=a.reduce((function(t,e){return t[e.groupID]=e,e.children=[],t}),{}),o=a.filter((function(t){return n[t.parentID]&&n[t.parentID].children.push(t),"-1"==t.parentID}));t.data=o}))}},created:function(){this.loadKinds(),this.loadTypes(),this.handSearch()},mounted:function(){this.getGroups()}},i=l,c=(a("9eb7"),a("2877")),d=Object(c["a"])(i,n,o,!1,null,"81294eaa",null);e["default"]=d.exports},d58f:function(t,e,a){var n=a("1c0b"),o=a("7b0b"),r=a("44ad"),s=a("50c4"),l=function(t){return function(e,a,l,i){n(a);var c=o(e),d=r(c),p=s(c.length),u=t?p-1:0,m=t?-1:1;if(l<2)while(1){if(u in d){i=d[u],u+=m;break}if(u+=m,t?u<0:p<=u)throw TypeError("Reduce of empty array with no initial value")}for(;t?u>=0:p>u;u+=m)u in d&&(i=a(i,d[u],u,c));return i}};t.exports={left:l(!1),right:l(!0)}}}]);