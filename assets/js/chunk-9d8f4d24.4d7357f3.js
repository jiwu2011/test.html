(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d8f4d24"],{"13d5":function(e,t,a){"use strict";var r=a("23e7"),l=a("d58f").left,n=a("a640"),o=a("ae40"),s=a("2d00"),i=a("605d"),c=n("reduce"),u=o("reduce",{1:0}),d=!i&&s>79&&s<83;r({target:"Array",proto:!0,forced:!c||!u||d},{reduce:function(e){return l(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},4346:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("el-row",{staticStyle:{"margin-top":"5px","margin-left":"5px"}},[a("el-col",{attrs:{span:24,offset:0}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"公司名称"}},[a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.queryPars.enterpriseName,callback:function(t){e.$set(e.queryPars,"enterpriseName",t)},expression:"queryPars.enterpriseName"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"行业类型"}},[a("el-select",{attrs:{placeholder:"请选择行业类型",multiple:""},model:{value:e.queryPars.industry,callback:function(t){e.$set(e.queryPars,"industry",t)},expression:"queryPars.industry"}},e._l(e.industry,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"公司规模"}},[a("el-select",{attrs:{placeholder:"请选择公司规模",multiple:""},model:{value:e.queryPars.scale,callback:function(t){e.$set(e.queryPars,"scale",t)},expression:"queryPars.scale"}},e._l(e.scale,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"风险等级"}},[a("el-select",{attrs:{placeholder:"请选择风险等级",multiple:""},model:{value:e.queryPars.riskLevel,callback:function(t){e.$set(e.queryPars,"riskLevel",t)},expression:"queryPars.riskLevel"}},e._l(e.riskLevel,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1)],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"margin-left":"5px"}},[a("el-col",{attrs:{span:24,offset:0}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"监管等级"}},[a("el-select",{attrs:{placeholder:"请选择监管等级",multiple:""},model:{value:e.queryPars.manageLevel,callback:function(t){e.$set(e.queryPars,"manageLevel",t)},expression:"queryPars.manageLevel"}},e._l(e.manageLevel,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:e.getSearch}},[e._v("搜索")])],1)],1)],1)],1)],1),a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,"header-row-class-name":e.customerHead,border:!0,stripe:!0,data:e.tableData}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),a("el-table-column",{attrs:{prop:"name",label:"公司名称",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"top",effect:"dark"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[e._v(e._s(t.row.name))])]),a("span",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(a){return e.loactionFeature(t.row)}}},[e._v(e._s(e.subCompany(t.row)))])])]}}])}),a("el-table-column",{attrs:{prop:"industryName",label:"行业分类",width:"100"}}),a("el-table-column",{attrs:{prop:"locationName",label:"所在地区",width:"100"}}),a("el-table-column",{attrs:{prop:"manageLevelName",label:"监管层级",width:"100"}}),a("el-table-column",{attrs:{prop:"riskLevelName",label:"风险层级",width:"100"}}),a("el-table-column",{attrs:{prop:"scaleName",label:"规模",width:"80"}}),a("el-table-column",{attrs:{prop:"legalPerson",label:"法人",width:"100"}}),a("el-table-column",{attrs:{prop:"chargeTel",label:"联系电话",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("my-telephone",{attrs:{book:e.handPersonTel1(t.row)}})]}}])}),a("el-table-column",{attrs:{prop:"safePerson",label:"安全员",width:"100"}}),a("el-table-column",{attrs:{prop:"safeTel",label:"联系电话",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("my-telephone",{attrs:{book:e.handPersonTel(t.row)}})]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"5px"},attrs:{background:"",layout:"total,prev, pager, next",total:e.total,"current-page":e.queryPars.pageIndex,"page-size":e.queryPars.pageSize},on:{"current-change":e.handPageIndexChanged}})],1)])},l=[],n=(a("4de4"),a("baa5"),a("d81d"),a("13d5"),a("b0c0"),a("7c15")),o=a("d80d"),s=(a("c1df"),{watch:{filterText:function(e){this.$refs.tree.filter(e)}},components:{"my-telephone":o["a"]},mounted:function(){this.getGroups(),this.loadindustry(),this.loadscale(),this.loadriskLevel(),this.loadmanageLevel(),this.getSearch()},methods:{loactionFeature:function(e){console.log(e);var t={layercode:32,featureid:e.enterpriseId,longitude:e.longitude,latitude:e.latitude};this.$router.push("/index"),console.log(t),this.$store.dispatch("SET_FEATURE_OBJ",t)},handPersonTel:function(e){return{display:!1,name:e.safePerson,tel:e.safeTel,ts:new Date}},handPersonTel1:function(e){return{display:!1,name:e.legalPerson,tel:e.chargeTel,ts:new Date}},loadindustry:function(){var e=this;Object(n["c"])({code:"hyfl"}).then((function(t){e.industry=t.data}))},loadscale:function(){var e=this;Object(n["c"])({code:"qygm"}).then((function(t){e.scale=t.data}))},loadriskLevel:function(){var e=this;Object(n["c"])({code:"fxdj"}).then((function(t){e.riskLevel=t.data}))},loadmanageLevel:function(){var e=this;Object(n["c"])({code:"jgdj"}).then((function(t){e.manageLevel=t.data}))},getSearch:function(){var e=this;Object(n["j"])(this.queryPars).then((function(t){e.tableData=t.data,console.log(t),e.total=t.total}))},handLeaderChanged:function(e){var t=this;this.leaders.map((function(a,r){if(a.personID==e)return t.form.post=a.post,void(t.form.leaderMobile=a.mobile)}))},handPageIndexChanged:function(e){this.queryPars.pageIndex=e,this.getSearch()},handPersonChanged:function(e){var t=this;console.log("handPersonChanged"),console.log(this.persons),console.log(e),this.persons.map((function(a,r){if(a.personID==e)return t.form.personMobile=a.mobile,void console.log("find")}))},handChange:function(e){var t=this,a=[];a.push(e);var r={groupID:a};Object(n["hb"])(r).then((function(e){t.form.officeTel="",t.leaders=[],e.data.data.map((function(e,a){return 1==e.duty?t.form.officeTel+=e.mobile+",":t.leaders.push(e),void 0===e})),console.log(t.leaders),t.form.officeTel=t.form.officeTel.substring(0,t.form.officeTel.lastIndexOf(","))}))},handDeptChange:function(e){var t=this,a=[];a.push(e);var r={groupID:a};Object(n["hb"])(r).then((function(e){t.persons=[],e.data.data.map((function(e,a){return 0==e.duty&&t.persons.push(e),void 0===e}))}))},getGroups:function(){var e=this;Object(n["Wb"])(this.pars).then((function(t){console.log(t);var a=t.data,r=a.reduce((function(e,t){return e[t.groupID]=t,t.children=[],e}),{}),l=a.filter((function(e){return r[e.parentID]&&r[e.parentID].children.push(e),"-1"==e.parentID}));e.data=l,console.log(e.data)}))},subCompany:function(e){return e.name.length>15?e.name.substring(0,14)+"...":e.name},saveCommandSystem:function(){var e=this;console.log(this.form);var t={commandID:this.form.commandID,typeID:1,leaderPersonID:this.leader,leaderGroupID:this.form.leaderGroupID,groupID:this.form.personGroupID,personID:this.personID,index:this.form.index};Object(n["d"])(t).then((function(t){console.log(t),1==t.status?(e.$message({message:"保存指挥体系成员单位成功!",type:"success"}),e.dialogFormVisible=!1):e.$message({message:"保存指挥体系成员单位失败!",type:"error"})}))}},data:function(){return{dialogFormVisible:!1,nodeData:{},leaders:[],leader:"",persons:[],person:"",data:[],total:0,industry:[],scale:[],riskLevel:[],manageLevel:[],pars:{codeID:78,groupName:void 0,parentID:void 0,groupID:void 0,pageIndex:void 0,pageSize:1e3},queryPars:{pageSize:10,pageIndex:1,enterpriseName:void 0,industry:void 0,scale:void 0,riskLevel:void 0,manageLevel:void 0},formLabelWidth:"80px",form:{commandID:"",officeTel:"",post:"",leaderMobile:"",personMobile:"",leaderGroupID:"",personGroupID:"",index:0,typeID:1},tableData:[],treeData:[{label:"应急指挥信息系统",id:1,children:[{label:"县委",id:2,children:[{id:3,label:"办公室"}]}]}]}}}),i=s,c=(a("aa62"),a("2877")),u=Object(c["a"])(i,r,l,!1,null,"a87f98a8",null);t["default"]=u.exports},aa62:function(e,t,a){"use strict";a("d9e6")},baa5:function(e,t,a){var r=a("23e7"),l=a("e58c");r({target:"Array",proto:!0,forced:l!==[].lastIndexOf},{lastIndexOf:l})},d58f:function(e,t,a){var r=a("1c0b"),l=a("7b0b"),n=a("44ad"),o=a("50c4"),s=function(e){return function(t,a,s,i){r(a);var c=l(t),u=n(c),d=o(c.length),p=e?d-1:0,f=e?-1:1;if(s<2)while(1){if(p in u){i=u[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in u&&(i=a(i,u[p],p,c));return i}};e.exports={left:s(!1),right:s(!0)}},d9e6:function(e,t,a){},e58c:function(e,t,a){"use strict";var r=a("fc6a"),l=a("a691"),n=a("50c4"),o=a("a640"),s=a("ae40"),i=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),p=s("indexOf",{ACCESSORS:!0,1:0}),f=u||!d||!p;e.exports=f?function(e){if(u)return c.apply(this,arguments)||0;var t=r(this),a=n(t.length),o=a-1;for(arguments.length>1&&(o=i(o,l(arguments[1]))),o<0&&(o=a+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:c}}]);