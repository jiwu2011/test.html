(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b722099"],{"0958":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"search"},[r("el-row",[r("el-col",{attrs:{span:24,offset:0}},[r("el-row",{attrs:{gutter:40}},[r("el-col",{attrs:{span:8}},[r("el-form",{attrs:{"label-width":"70px"}},[r("el-form-item",{attrs:{label:"所属专项"}},[r("el-select",{attrs:{placeholder:"请选择所属专项"},on:{change:e.handChange},model:{value:e.project,callback:function(t){e.project=t},expression:"project"}},e._l(e.projects,(function(e){return r("el-option",{key:e.codeID,attrs:{label:e.codeName,value:e.codeID}})})),1)],1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form",{attrs:{"label-width":"40px"}},[r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.queryPars.personName,callback:function(t){e.$set(e.queryPars,"personName",t)},expression:"queryPars.personName"}})],1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form",{attrs:{"label-width":"70px"}},[r("el-form-item",{attrs:{label:"联系号码"}},[r("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.queryPars.telephone,callback:function(t){e.$set(e.queryPars,"telephone",t)},expression:"queryPars.telephone"}})],1)],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.getSearch}},[e._v("搜索")])],1)],1)],1)],1)],1),r("div",{staticClass:"content"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0,"header-cell-style":{background:"#66b1ff",color:"#fff",border:"1px solid #fff"}}},[r("el-table-column",{attrs:{prop:"leaderGroupName",label:"单位名称",width:"120"}}),r("el-table-column",{attrs:{prop:"officeTel",label:"值班电话",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("my-telephones",{attrs:{dt:e.handDutyTels(t.row)}})]}}])}),r("el-table-column",{attrs:{prop:"leaderName",label:"分管负责人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("my-telephones",{attrs:{dt:e.handAllTels(t.row)}})]}}])}),r("el-table-column",{attrs:{prop:"leaderPost",label:"职务",width:"150"}}),r("el-table-column",{attrs:{prop:"leaderMobile",label:"联系电话",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("my-telephone",{attrs:{book:e.handLeaderTel(t.row)}})]}}])}),r("el-table-column",{attrs:{prop:"groupName",label:"负责科室",width:"120"}}),r("el-table-column",{attrs:{prop:"personName",label:"科室负责人",width:"85"}}),r("el-table-column",{attrs:{prop:"personMobile",label:"联系电话",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("my-telephone",{attrs:{book:e.handPersonTel(t.row)}})]}}])})],1),r("div",{staticClass:"page"},[r("el-pagination",{staticStyle:{"margin-top":"5px"},attrs:{background:"",layout:"prev, pager, next",total:e.total,"current-page":e.queryPars.pageIndex,"page-size":e.queryPars.pageSize},on:{"current-change":e.handPageIndexChanged}})],1)],1),r("div",{staticClass:"right"},[r("el-tree",{ref:"tree",attrs:{data:e.treeData,id:"el-tree",props:e.defaultProps}})],1)])},n=[],o=(r("4de4"),r("d81d"),r("13d5"),r("b0c0"),r("96cf"),r("1da1")),l=r("d80d"),s=r("16ad"),i=r("7c15"),u={watch:{filterText:function(e){this.$refs.tree.filter(e)}},components:{"my-telephone":l["a"],"my-telephones":s["a"]},methods:{handDutyTels:function(e){var t=e.officeTel,r=[];return t.map((function(e,t){r.push({name:"值班电话"+(t+1),mobile:e})})),{tels:r}},handAllTels:function(e){var t="",r=e.officeTel,a=[];return r.map((function(e,t){a.push({name:"值班电话"+(t+1),mobile:e})})),a.push({name:e.leaderName,mobile:e.leaderMobile}),a.push({name:e.personName,mobile:e.personMobile}),t=e.leaderName,{tels:a,label:t}},handLeaderTel:function(e){return{display:!1,name:e.leaderName,tel:e.leaderMobile,ts:new Date}},handPersonTel:function(e){return{display:!1,name:e.personName,tel:e.personMobile,ts:new Date}},handEdit:function(){},handChange:function(){this.getSearch(),this.getGroupPersons()},handPageIndexChanged:function(){},getPersonsList:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],t.next=3,Object(i["h"])(e).then((function(e){r=e.data}));case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},getSearch:function(){var e=this;this.queryPars.kindID=this.project,Object(i["f"])(this.queryPars).then((function(t){console.log(t),e.tableData=t.data,e.total=t.total}))},loadProjects:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={codeType:12,pageSize:100},t.next=3,Object(i["c"])(r).then((function(t){e.projects=t.data}));case 3:console.log(e.projects),e.treePars.kindID=e.projects[0].codeID,e.getSearch(),e.getGroupPersons();case 7:case"end":return t.stop()}}),t)})))()},dutyTelFormat:function(e,t){var r=e[t.property],a="";return r.map((function(e,t){a+=e+","})),void 0==r?"":a},getGroups:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],t.next=3,Object(i["Wb"])(e).then((function(e){r=e.data}));case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},getGroupPersons:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.treePars.kindID=e.project,t.next=3,e.getGroups(e.treePars).then((function(t){console.log("getGroups---\x3e",t),e.groupList=JSON.parse(JSON.stringify(t))}));case 3:return r=[],e.groupList.map((function(e,t){r.push(e.groupID)})),e.treePersonPars.groupID=r,console.log("ids----\x3e",r),t.next=9,e.getPersonsList(e.treePersonPars).then((function(t){e.personList=t}));case 9:a=e.groupList.reduce((function(e,t){return e[t.groupID]=t,t.children=[],e}),{}),e.treeData=e.groupList.filter((function(e){return a[e.parentID]&&a[e.parentID].children.push(e),"-1"==e.parentID})),e.personList.map((function(e,t){var r={groupName:void 0,groupID:void 0,mobile:void 0};console.log(e),r.groupName=e.name+"-"+e.moblie,r.groupID=e.groupPersonID,r.mobile=e.moblie,a[e.groupID].children.push(r)}));case 12:case"end":return t.stop()}}),t)})))()}},created:function(){this.loadProjects()},mounted:function(){},data:function(){return{defaultProps:{children:"children",label:"groupName"},project:void 0,projects:[],treePars:{codeID:76,groupName:void 0,kindID:void 0,parentID:void 0,groupID:void 0,pageIndex:void 0,pageSize:100},treePersonPars:{pageSize:1e3,pageIndex:1,typeID:1,groupID:void 0,groupName:void 0,mobile:void 0},queryPars:{pageSize:10,pageIndex:1,typeID:2,kindID:void 0,personName:void 0,groupName:void 0,telephone:void 0},total:0,groupList:[],personList:[],tableData:[{date:"2016-05-02",name:"县委办",officeTel:"84011217",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"},{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],treeData:[]}}},c=u,d=(r("72c4"),r("2877")),p=Object(d["a"])(c,a,n,!1,null,"01ee2966",null);t["default"]=p.exports},"13d5":function(e,t,r){"use strict";var a=r("23e7"),n=r("d58f").left,o=r("a640"),l=r("ae40"),s=r("2d00"),i=r("605d"),u=o("reduce"),c=l("reduce",{1:0}),d=!i&&s>79&&s<83;a({target:"Array",proto:!0,forced:!u||!c||d},{reduce:function(e){return n(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"16ad":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-tooltip",{attrs:{placement:"top",effect:"light"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[r("el-table-column",{attrs:{prop:"mobile",label:"联系电话",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("my-tel",{attrs:{book:{name:e.row.name,tel:e.row.mobile}}})]}}])})],1)],1),r("span",[e._v(e._s(e.handSubConent(e.list)))])])],1)},n=[],o=r("d80d"),l={data:function(){return{list:[],label:void 0}},components:{"my-tel":o["a"]},props:["dt"],watch:{dt:{deep:!0,immediate:!0,handler:function(e,t){this.list=e.tels,void 0!=e.label&&(this.label=e.label)}}},methods:{handSubConent:function(e){var t=e.length;return void 0!=this.label?this.label:0==t?"":1==t?e[0].mobile:e[0].mobile+"..."}},mounted:function(){}},s=l,i=r("2877"),u=Object(i["a"])(s,a,n,!1,null,"67df63d5",null);t["a"]=u.exports},"1e0c":function(e,t,r){},"72c4":function(e,t,r){"use strict";r("1e0c")},d58f:function(e,t,r){var a=r("1c0b"),n=r("7b0b"),o=r("44ad"),l=r("50c4"),s=function(e){return function(t,r,s,i){a(r);var u=n(t),c=o(u),d=l(u.length),p=e?d-1:0,f=e?-1:1;if(s<2)while(1){if(p in c){i=c[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in c&&(i=r(i,c[p],p,u));return i}};e.exports={left:s(!1),right:s(!0)}}}]);