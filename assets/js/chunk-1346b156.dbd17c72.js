(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1346b156"],{"4cee":function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wrapper"},[o("div",{staticClass:"main"},[o("el-scrollbar",{staticStyle:{height:"100%"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:"","cell-style":{"text-align":"center"},"header-cell-style":{"text-align":"center"}}},[o("el-table-column",{attrs:{type:"index",label:"#"}}),o("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"280"}}),o("el-table-column",{attrs:{prop:"roleDescription",label:"角色描述",width:"480"}}),o("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tooltip",{attrs:{effect:"dark",content:"修改",placement:"top",enterable:!1}},[o("el-button",{attrs:{type:"success",icon:"el-icon-edit",size:"mini"},on:{click:function(o){return e.handleEditClick(t.row)}}})],1),o("el-tooltip",{attrs:{effect:"dark",content:"分配权限",placement:"top",enterable:!1}},[o("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(o){return e.handleAllotClick(t.row)}}})],1)]}}])})],1)],1)],1),o("el-dialog",{attrs:{title:"角色基本信息编辑",visible:e.roleInfoFormVisible,"before-close":e.closeDialog},on:{"update:visible":function(t){e.roleInfoFormVisible=t}}},[o("el-form",{attrs:{model:e.roleInfo}},[o("el-form-item",{attrs:{label:"角色名称","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.roleInfo.roleName,callback:function(t){e.$set(e.roleInfo,"roleName",t)},expression:"roleInfo.roleName"}})],1),o("el-form-item",{attrs:{label:"角色描述","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.roleInfo.roleDescription,callback:function(t){e.$set(e.roleInfo,"roleDescription",t)},expression:"roleInfo.roleDescription"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.roleInfoFormVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleInfo}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"角色权限分配",visible:e.allotDialogVisible},on:{"update:visible":function(t){e.allotDialogVisible=t}}},[o("el-form",{attrs:{model:e.roleInfo}},[o("el-form-item",{attrs:{label:"角色名称","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.roleInfo.roleName,callback:function(t){e.$set(e.roleInfo,"roleName",t)},expression:"roleInfo.roleName"}})],1),o("el-form-item",{attrs:{label:"权限分配","label-width":e.formLabelWidth}},[o("el-scrollbar",{staticStyle:{height:"300px"}},[o("el-tree",{ref:"tree",attrs:{data:e.treeData,"show-checkbox":"","default-checked-keys":e.arrPermissionId,"default-expand-all":"","check-strictly":"","node-key":"permissionID","highlight-current":"",props:e.defaultProps}})],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.selectAll}},[e._v("全 选")]),o("el-button",{on:{click:function(t){e.allotDialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleAllotInfo}},[e._v("确 定")])],1)],1)],1)},i=[],a=(o("99af"),o("d81d"),o("7c15")),r={name:"Role",components:{},data:function(){return{total:0,list:[],queryPars:{pageSize:10,pageIndex:1},roleInfoFormVisible:!1,allotDialogVisible:!1,formLabelWidth:"120px",roleInfo:{roleID:void 0,roleName:"",roleDescription:""},treeData:[],defaultProps:{children:"children",label:"permissionName"},arrPermissionId:[]}},created:function(){this.loadData()},mounted:function(){},watch:{},computed:{},methods:{handPageIndexChanged:function(e){this.queryPars.pageIndex=e},handleEditClick:function(e){console.log(e),this.roleInfoFormVisible=!0,this.roleInfo.roleID=e.roleID,this.roleInfo.roleName=e.roleName,this.roleInfo.roleDescription=e.roleDescription},handleAllotClick:function(e){this.getPermissionTreeData(),this.roleInfo.roleName=e.roleName,this.roleInfo.roleID=e.roleID;var t={roleID:e.roleID};this.getPermissionIDByRole(t),this.allotDialogVisible=!0},saveRoleInfo:function(){var e=this;Object(a["mc"])(this.roleInfo).then((function(t){1==t.status?(e.$message({message:"保存成功",type:"success"}),e.roleInfoFormVisible=!1,e.loadData()):e.$message.error(t.msg)}))},loadData:function(){var e=this;Object(a["lc"])().then((function(t){1==t.status&&(e.list=t.data)}))},closeDialog:function(){},saveRoleAllotInfo:function(){var e=this,t=this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys()),o={roleID:this.roleInfo.roleID,permissionIDs:t};Object(a["vb"])(o).then((function(t){1==t.status?(e.$message({message:"保存成功",type:"success"}),e.allotDialogVisible=!1):e.$message.error(t.msg)})),this.arrPermissionId=[]},getPermissionTreeData:function(){var e=this;Object(a["kc"])().then((function(t){1==t.status&&(e.treeData=t.data)}))},getPermissionIDByRole:function(e){var t=this;this.arrPermissionId=[],Object(a["Vb"])(e).then((function(e){1==e.status&&(t.arrPermissionId=e.data,console.log(e.data))}))},selectAll:function(){var e=this;Object(a["jc"])({pageSize:1e3,pageIndex:1}).then((function(t){if(1==t.status){var o=t.data;e.arrPermissionId=o.map((function(e){return e.permissionID}))}}))}}},s=r,n=(o("6aa7"),o("2877")),c=Object(n["a"])(s,l,i,!1,null,"d1c9f510",null);t["default"]=c.exports},"6aa7":function(e,t,o){"use strict";o("88fc")},"88fc":function(e,t,o){}}]);