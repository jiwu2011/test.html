(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3aeecf6"],{"062c":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"right"},[r("el-row",{staticClass:"el-row"},[r("el-col",{attrs:{span:24,offset:0}},[r("el-row",{attrs:{gutter:40}},[r("el-col",{staticStyle:{height:"40px"},attrs:{span:12}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属镇村"},on:{change:e.handChange},model:{value:e.project,callback:function(t){e.project=t},expression:"project"}},e._l(e.projects,(function(e){return r("el-option",{key:e.groupID,attrs:{label:e.groupName,value:e.groupID}})})),1)],1),r("el-col",{staticStyle:{height:"40px"},attrs:{span:12}},[r("el-input",{staticStyle:{height:"40px",width:"100%"},attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:24,offset:0}},[r("el-row",{attrs:{gutter:40}},[r("el-col",{attrs:{span:24}},[r("div",{staticStyle:{height:"70vh"}},[r("el-scrollbar",{staticStyle:{height:"100%"}},[r("el-tree",{ref:"tree",staticStyle:{"min-height":"400px"},attrs:{data:e.treeData,id:"el-tree",props:e.defaultProps,"filter-node-method":e.filterNode,"show-checkbox":""},on:{"node-click":e.handNodeClick},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.node,n=e.data;return r("span",{staticClass:"custom-tree-node"},[r("my-telephone",{attrs:{book:{name:t.label,tel:n.mobile}}})],1)}}])})],1)],1)])],1)],1)],1),r("el-row",{staticClass:"el-row"},[r("el-col",{attrs:{span:24,offset:0}},[r("el-row",{attrs:{gutter:40}},[r("el-col",{staticStyle:{height:"40px"},attrs:{span:24}},[r("div",{staticStyle:{position:"relative",height:"30px",width:"100%","backgoround-color":"#fff"}},[r("el-tooltip",{attrs:{placement:"top",effect:"light"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-user",size:"mini",round:""}},[e._v("多方通话")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-user",size:"mini",round:""}},[e._v("邀请入会")])],1),r("el-button",{attrs:{icon:"el-icon-phone-outline",size:"mini"},on:{click:e.handOpenTelConf}},[e._v("语音通讯")])],1),e._v(" "),r("el-tooltip",{attrs:{placement:"top",effect:"light"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-user",size:"mini",round:""},on:{click:e.handOpenVideoConf}},[e._v("一键组会")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-user",size:"mini",round:""},on:{click:e.handInvite}},[e._v("邀请入会")])],1),r("el-button",{attrs:{icon:"el-icon-phone-outline",size:"mini"}},[e._v("多媒体会商")])],1)],1)])],1)],1)],1)],1)])},o=[],i=(r("4de4"),r("4160"),r("c975"),r("d81d"),r("13d5"),r("b0c0"),r("ade3")),a=(r("96cf"),r("1da1")),s=r("7c15"),c=r("d80d"),u={watch:{filterText:function(e){this.$refs.tree.filter(e)}},components:{"my-telephone":c["a"]},methods:{handOpenVideoConf:function(){var e=this.$refs.tree.getCheckedNodes(),t=[];console.log("^^^^^^",e),e.map((function(e){void 0!=e.mobile&&""!=e.mobile&&t.push({number:e.mobile,name:e.groupName})})),t.push({number:this.$store.getters.GET_AGENT,name:""});var r={conf:void 0,users:[]};r={conf:this.$store.getters.GET_TEL_CONF,users:t};var n=CreateVideoConf(r);this.$store.dispatch("WEBSOCKET_SEND",JSON.stringify(n)),console.log("一键参会人员名单-----\x3e",t,"会议室信息------\x3e",this.$store.getters.GET_TEL_CONF)},handInvite:function(){var e=this.$refs.tree.getCheckedNodes(),t=[];console.log("^^^^^^",e),e.map((function(e){void 0!=e.mobile&&""!=e.mobile&&t.push({number:e.mobile,name:e.groupName})}));var r=AddVideoMember(this.$store.getters.GET_VIDEO_CONF,t);this.$store.dispatch("WEBSOCKET_SEND",JSON.stringify(r))},filterNode:function(e,t,r){if(!e)return!0;r.level;var n=[];this.getReturnNode(r,n,e);var o=!1;return n.forEach((function(e){o=o||e})),o},getReturnNode:function(e,t,r){console.log(e,t,r);var n=e.data&&e.data.groupName&&-1!==e.data.groupName.indexOf(r);n&&t.push(n),this.index++,console.log(this.index),!n&&1!=e.level&&e.parent&&this.getReturnNode(e.parent,t,r)},handChange:function(){this.treeData=[],this.GetAllGroups().then((function(){console.log("load grid")}))},handNodeClick:function(e,t,r){console.log(e),console.log(t),console.log(r)},loadProjects:function(){var e=this,t={codeID:77,pageSize:1e3,parentID:"-1"};Object(s["Wb"])(t).then((function(t){e.projects=t.data,console.log("projects"),console.log(e.projects),e.project=t.data[0].groupID,e.GetAllGroups().then((function(){console.log("load grid")}))}))},GetGroups:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.treePars.parentID=e,console.log("grid:",t.treePars),r.next=4,Object(s["Wb"])(t.treePars).then((function(e){0!=e.total&&e.data.map(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.groups.push(r),e.next=3,t.GetGroups(r.groupID);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}));case 4:case"end":return r.stop()}}),r)})))()},GetAllGroups:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GetGroups(e.project);case 2:setTimeout((function(){var t=[];e.groups.map((function(e,r){t.push(e.groupID)})),e.pars.groupID=t,Object(s["h"])(e.pars).then((function(t){console.log(t);var r=e.groups;console.log(r);var n=r.reduce((function(e,t){return e[t.groupID]=t,t.children=[],e}),{}),o=r.filter((function(r){return t.data.map((function(e,t){if(e.groupID==r.groupID){var o={groupName:void 0,groupID:void 0,mobile:void 0};o.groupName=e.name+"-"+e.moblie,o.groupID=e.groupPersonID,o.mobile=e.moblie,n[e.groupID].children.push(o)}})),n[r.parentID]&&n[r.parentID].children.push(r),r.parentID==e.project}));console.log(o),e.treeData=o}))}),300);case 3:case"end":return t.stop()}}),t)})))()},getPersonsList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],t.next=3,Object(s["h"])(e.pars).then((function(t){console.log("---------------------------"),console.log(e.pars),console.log(t),r=t.data}));case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},getGroups:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],t.next=3,Object(s["Wb"])(e).then((function(e){r=e.data}));case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},getGroupPersons:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getGroups(e.treePars).then((function(t){e.groupList=JSON.parse(JSON.stringify(t))}));case 2:return r=[],e.groupList.map((function(e,t){r.push(e.groupID)})),e.treePersonPars.groupID=r,t.next=7,e.getPersonsList(e.treePersonPars).then((function(t){e.personList=t}));case 7:n=e.groupList.reduce((function(e,t){return e[t.groupID]=t,t.children=[],e}),{}),e.treeData=e.groupList.filter((function(e){return n[e.parentID]&&n[e.parentID].children.push(e),"-1"==e.parentID})),e.personList.map((function(e,t){var r={groupName:void 0,groupID:void 0,mobile:void 0};r.groupName=e.name+"-"+e.moblie,r.groupID=e.groupPersonID,r.mobile=e.moblie,n[e.groupID].children.push(r)}));case 10:case"end":return t.stop()}}),t)})))()}},created:function(){this.loadProjects()},data:function(){return Object(i["a"])({filterText:"",treePars:{codeID:77,groupID:void 0,parentID:"b0a87f4e-cab3-49e4-88d6-5d08740cdf63",pageIndex:void 0,pageSize:100},parentID:void 0,treePersonPars:{groupID:[]},gridName:void 0,pars:{pageSize:10,pageIndex:1,typeID:3,groupID:void 0,groupName:void 0,mobile:void 0},treeData:[],groups:[],defaultProps:{children:"children",label:"groupName"},project:void 0,projects:[]},"filterText",void 0)}},l=u,p=(r("16c9"),r("2877")),d=Object(p["a"])(l,n,o,!1,null,"1eaf7bf2",null);t["a"]=d.exports},"13d5":function(e,t,r){"use strict";var n=r("23e7"),o=r("d58f").left,i=r("a640"),a=r("ae40"),s=r("2d00"),c=r("605d"),u=i("reduce"),l=a("reduce",{1:0}),p=!c&&s>79&&s<83;n({target:"Array",proto:!0,forced:!u||!l||p},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"16c9":function(e,t,r){"use strict";r("261f")},"1cbb":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("my-grid")],1)},o=[],i=r("062c"),a={components:{"my-grid":i["a"]}},s=a,c=r("2877"),u=Object(c["a"])(s,n,o,!1,null,"311bc096",null);t["default"]=u.exports},"261f":function(e,t,r){},d58f:function(e,t,r){var n=r("1c0b"),o=r("7b0b"),i=r("44ad"),a=r("50c4"),s=function(e){return function(t,r,s,c){n(r);var u=o(t),l=i(u),p=a(u.length),d=e?p-1:0,f=e?-1:1;if(s<2)while(1){if(d in l){c=l[d],d+=f;break}if(d+=f,e?d<0:p<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:p>d;d+=f)d in l&&(c=r(c,l[d],d,u));return c}};e.exports={left:s(!1),right:s(!0)}}}]);