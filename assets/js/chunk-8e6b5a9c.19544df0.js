(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e6b5a9c"],{"2cee":function(e,t,r){"use strict";r("fd83")},a17f:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"header"},[r("el-row",[r("el-form",{staticClass:"demo-form-inline",staticStyle:{float:"left","margin-left":"30px","margin-top":"5px"},attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{clearable:"",placeholder:"用户名"},model:{value:e.queryPars.userName,callback:function(t){e.$set(e.queryPars,"userName",t)},expression:"queryPars.userName"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.queryData}},[e._v("查询")])],1),r("el-form-item",[r("el-button",{attrs:{type:"success"},on:{click:e.addUser}},[e._v("创建新用户")])],1)],1)],1)],1),r("div",{staticClass:"main"},[r("el-scrollbar",{staticStyle:{height:"90%"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:"","cell-style":{"text-align":"center"},"header-cell-style":{"text-align":"center"}}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"280"}}),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"480"}}),r("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"修改",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"success",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.handleEditClick(t.row)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.handleDeleteClick(t.row)}}})],1)]}}])})],1)],1)],1),r("div",{staticClass:"footer"},[r("el-pagination",{staticStyle:{"margin-top":"5px"},attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.queryPars.pageIndex,"page-size":e.queryPars.pageSize},on:{"current-change":e.handPageIndexChanged}})],1),r("el-dialog",{attrs:{title:e.titleMap[e.dialogStatus],visible:e.addUserFormVisible},on:{"update:visible":function(t){e.addUserFormVisible=t}}},[r("el-form",{ref:"addUserForm",attrs:{model:e.addUserForm}},[r("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"userName"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.addUserForm.userName,callback:function(t){e.$set(e.addUserForm,"userName",t)},expression:"addUserForm.userName"}})],1),""==e.addUserForm.userID?r("el-form-item",{attrs:{label:"用户密码","label-width":e.formLabelWidth,prop:"password"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,"password",t)},expression:"addUserForm.password"}})],1):e._e(),r("el-form-item",{attrs:{label:"用户角色","label-width":e.formLabelWidth,prop:"roleID"}},[r("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.addUserForm.roleID,callback:function(t){e.$set(e.addUserForm,"roleID",t)},expression:"addUserForm.roleID"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.roleID,attrs:{label:e.roleName,value:e.roleID}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.close}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},s=[],o=r("8237"),l=r.n(o),i=r("7c15"),n={name:"User",components:{},data:function(){return{total:0,list:[],queryPars:{pageSize:10,pageIndex:1,userName:""},addUserFormVisible:!1,addUserForm:{userID:void 0,userName:"",password:"",roleID:""},formLabelWidth:"120px",roleList:[],titleMap:{addUser:"创建新用户",editUser:"编辑用户信息"},dialogStatus:""}},created:function(){this.queryData()},mounted:function(){},watch:{},computed:{},methods:{handPageIndexChanged:function(e){this.queryPars.pageIndex=e},queryData:function(){var e=this;Object(i["nc"])(this.queryPars).then((function(t){1==t.status&&(e.list=t.data,e.total=t.total)}))},getRoleData:function(){var e=this;Object(i["lc"])().then((function(t){1==t.status&&(e.roleList=t.data)}))},addUser:function(){this.addUserForm.userID="",this.addUserForm.userName="",this.addUserForm.password="",this.addUserForm.roleID="",this.getRoleData(),this.addUserFormVisible=!0,this.dialogStatus="addUser"},save:function(){var e=this;if(""==this.addUserForm.userName||""==this.addUserForm.password||""==this.addUserForm.roleID)return this.$message.error("用户名、密码、角色不能为空"),!1;Object(i["pc"])({userID:this.addUserForm.userID,userName:this.addUserForm.userName,password:l()(this.addUserForm.password).toUpperCase(),roleID:this.addUserForm.roleID}).then((function(t){1==t.status?(e.$message({message:"保存成功",type:"success"}),e.queryData(),e.close()):e.$message.error(t.msg)}))},close:function(){this.addUserForm.userName,this.addUserForm.password,this.addUserForm.roleID,this.addUserFormVisible=!1},handleEditClick:function(e){this.dialogStatus="editUser",this.getRoleData(),this.addUserForm.userID=e.userID,this.addUserForm.userName=e.userName,this.addUserForm.roleID=e.roleID,this.addUserForm.password="随意，不影响",this.addUserFormVisible=!0},handleDeleteClick:function(e){var t=this,r={ids:[]};r.ids.push(e.userID),this.$confirm("此操作将永久删除这条级别数据，确定继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["oc"])(r).then((function(e){1==e.status?(t.$message.success("删除成功"),t.queryData()):t.$message.error(e.msg)})).catch((function(e){console.log(e),t.$message.error("删除失败，服务器内部出现错误！")}))})).catch((function(){t.$message.info("已取消删除")}))}}},d=n,c=(r("2cee"),r("2877")),u=Object(c["a"])(d,a,s,!1,null,"2636df98",null);t["default"]=u.exports},fd83:function(e,t,r){}}]);